"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPageContextProxyForUser = getPageContextProxyForUser;
const utils_js_1 = require("../server-routing-runtime/utils.js");
const NOT_SERIALIZABLE_js_1 = require("../../shared/NOT_SERIALIZABLE.js");
// Throw error when pageContext value isn't serializable
function getPageContextProxyForUser(pageContext) {
    return new Proxy(pageContext, {
        get(_, prop) {
            const val = pageContext[prop];
            const propName = (0, utils_js_1.getPropAccessNotation)(prop);
            (0, utils_js_1.assertUsage)(val !== NOT_SERIALIZABLE_js_1.NOT_SERIALIZABLE, `Can't access pageContext${propName} on the client side. Because it can't be serialized, see server logs.`);
            return val;
        }
    });
}
